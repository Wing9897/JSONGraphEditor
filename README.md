# JSON Graph Editor

一個專業的JSON數據可視化和編輯工具，提供三個完全同步的視圖：圖形視圖、表格編輯器和JSON編輯器。

## ✨ 主要特性

### 🔥 實時協調更新
- **零延遲同步**: 在任一編輯器中的更改立即反映到其他視圖
- **智能防衝突**: 先進的狀態管理防止循環更新和數據衝突  
- **焦點感知**: 編輯時不會被外部更新干擾

### 📊 三重視圖
- **圖形視圖**: 互動式節點圖，支持拖拽和縮放，視圖位置自動保持
- **表格編輯器**: Excel風格的2D數組編輯，支持直接儲存格編輯
- **JSON編輯器**: 專業代碼編輯器，實時語法檢查，無閃爍提示

### 🎯 智能特性
- **顏色編碼系統**: Array(藍)、Object Array(綠)、2D Array(紫)等不同顏色
- **重複項目顯示**: 完整顯示所有重複的對象和數組
- **差異更新**: 只重新渲染變化的部分，避免整頁閃爍
- **位置記憶**: 圖形節點和視圖位置在數據更新時保持穩定

## 🚀 快速開始

### 環境要求
- Node.js 16+
- npm 或 yarn

### 安裝和運行

1. **安裝依賴**
```bash
npm install
```

2. **啟動開發服務器**
```bash
npm run dev
```

3. **打開瀏覽器**
訪問顯示的本地地址 (通常是 `http://localhost:3000`)

### 生產構建
```bash
npm run build
npm run preview
```

## 🔧 技術架構

### 核心技術棧
- **前端框架**: React 18 + Hooks
- **構建工具**: Vite (快速熱重載)
- **狀態管理**: Zustand + Immer (輕量級狀態管理)
- **圖形渲染**: D3.js v7 (SVG操作和動畫)
- **樣式**: Tailwind CSS (實用優先)

### 架構優勢
```
┌─────────────────────┐
│   用戶操作 (UI)      │
├─────────────────────┤
│   實時同步層        │ ← 防衝突 + 智能更新
├─────────────────────┤
│   Zustand Store     │ ← 單一數據源
├─────────────────────┤
│   組件響應層        │ ← React + 差異更新
└─────────────────────┘
```

## 🎮 使用方式

### 圖形視圖 (左側)
- **拖拽節點**: 自定義布局，位置會自動記憶
- **縮放和平移**: 滑鼠滾輪縮放，拖拽空白區域平移，視圖狀態保持
- **重新布局**: 點擊"重新布局"按鈕恢復自動排列
- **顏色識別**: 不同類型節點有不同顏色，便於區分

### 表格編輯器 (右上)
- **選擇編輯**: 點擊圖形中的2D數組節點激活
- **儲存格編輯**: 點擊任意儲存格開始編輯
- **快速導航**: Enter下移，Tab右移，Esc取消
- **添加行/列**: 使用操作按鈕

### JSON編輯器 (右下) 
- **實時語法檢查**: 輸入時立即驗證JSON語法
- **自動格式化**: Ctrl+S 或失焦時自動美化代碼
- **智能同步**: 編輯時不會被其他視圖干擾
- **無閃爍提示**: 移除干擾性的保存/同步提示

### 高級功能
- **統計面板**: 顯示實時同步狀態和性能指標
- **重置功能**: 快速清空數據重新開始

## 📈 性能特點

### 優化特性
- ⚡ **虛擬DOM差異更新**: React自動優化重新渲染
- 🎯 **智能布局**: 只在結構重大變化時重新計算佈局  
- 🔄 **狀態保持**: 縮放、拖拽位置在數據更新時保持
- 💾 **內存優化**: 自動清理無用的節點位置記錄
- 🎨 **流暢動畫**: GPU加速的平滑過渡效果

### 性能指標
- **首次加載**: < 200ms (本地開發)
- **數據同步**: < 50ms 延遲
- **節點拖拽**: 60 FPS 流暢動畫
- **大數據處理**: 支持 1000+ 節點圖形

## 📁 項目結構

```
src/
├── components/             # React 組件
│   ├── JsonEditor_v2.jsx   # JSON 編輯器
│   ├── TableEditor.jsx     # 表格編輯器  
│   └── GraphViewer.jsx     # 圖形視圖
├── stores/             
│   └── jsonStore_v2.js     # Zustand 狀態管理
├── utils/
│   └── graphUtils.js       # 圖形處理工具
└── App.jsx                 # 主應用組件
```

## 🤝 貢獻

歡迎提交 Issues 和 Pull Requests!

### 開發設置
```bash
git clone [repository]
cd json-graph-editor
npm install
npm run dev
```

### 代碼規範
- React Hooks 優先
- 組件單一職責原則
- Zustand 統一狀態管理
- Tailwind CSS 樣式

## 📄 許可證

MIT License - 可自由使用和修改。

---

**享受流暢的實時協調編輯體驗! 🎉**